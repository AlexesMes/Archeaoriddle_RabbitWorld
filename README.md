# Archeaoriddle_RabbitWorld
Simulated dataset of Rabbitworld. Examining rate of dispersal of famers. Trying methods to improve archaeological inference.

All data and scripts required to reproduce the analysis are located within this repository. The repository is organised into five main directories: _src_, _scripts_, _data_, _output_, and _maps_.


# Folder Structure
* the _maps_ folder contains the fitness and elevation data required for the analysis
* the _scripts_ folder contains all the R-code scripts for running the analysis 
* the _data_ folder contains the data require to reproduce the analysis
* the _output_ folder contains all outputs generated by the scripts, including figures. MCMC posterior samples of all analyses are stored as R image files in this directory.

# Datasets
The datasets required for all analyses are contained in the directory _data_. Namely the R objects:
* `c14data.RData` contains poppychewer and rabbitskinner data in cleaned and prepared for the Bayesian analyses. The data is collated from `Biblio_data.csv`, `square_8.csv`, `square_12.csv`, `square_48.csv`, `square_62.csv`, `square_98.csv`.
* `c14data_farmers.RData` contains only the poppychewer data in cleaned and prepared for the Bayesian analyses.

The file `prepare_data.R` (in the _scripts_ folder) contains an R script that pre-processes information contained in the CSV files listed above and generates the R image files `c14data.RData` and `c14data_farmers.RData` -- depending if you are interested in the whole dataset or only the poppychewers. 


# Bayesian Analyses
The repository contains scripts and results of two different sets of analyses: 
* Bayesian Quantile Regression, 
* Hierarchichal Bayesian Phase Model. 

All models were defined and fitted using the [nimble](https://r-nimble.org/) R package, with the additional support of custom distributions and utility functions of the [nimbleCarbon](https://CRAN.R-project.org/package=nimbleCarbon) R package. 

In addition, the `cf.R` script (in the _scripts_ folder) contains a friction calculation used to initially determine which RabbitWorld squares more information was requested from.


# File Relationships

| **Analysis**                                      | **Data Generating Script**| **Input Data**           | **Analyses Script**   | **R Image containing Results** |
|---------------------------------------------------|---------------------------|--------------------------|-----------------------|--------------------------------|
| Bayesian Quantile Regression (Observed, tau=0.90) | NA                        | c14data_farmers.RData    | quantreg.R            | quantreg_res.RData             |
| Hierarchical Phase Model (observed, model a)      | NA                        | c14data_farmers.RData    | phasemodel_a.R        | phase_model_a.RData            |